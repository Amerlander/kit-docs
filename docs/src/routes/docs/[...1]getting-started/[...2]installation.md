---
description: Getting up and running with KitDocs.
---

# Installation

In this section we'll get you up and running with KitDocs. There's a few steps to get started
but they're all really simple copy/paste tasks, nothing to fear!

:::admonition type="tip"
See our [docs](https://github.com/svelteness/kit-docs/tree/main/docs) directory on GitHub if
you'd like a reference to use as you follow along with the steps below.
:::

## KitDocs

:::steps

!!!step title="Create SvelteKit App"|description="Create a new SvelteKit application from your terminal (skip this step if you have one). Pick the Skeleton option template."

```bash copySteps
npm init svelte@next mydocs
cd mydocs
npm i
```

!!!

!!!step title="Install Dependencies"|description="Install KitDocs and all dependencies via NPM."

```bash copy
npm i @svelteness/kit-docs @iconify-json/ri unplugin-icons -D
```

!!!

!!!step title="Update Svelte Config"|(slot=description)=Add the following highlighted lines to your `svelte.config.js` file or copy the entire config.

```js title=svelte.config.js{2-3,7,14-19}|copy
import adapter from '@sveltejs/adapter-auto';
import { kitDocsPlugin } from '@svelteness/kit-docs/node';
import Icons from 'unplugin-icons/vite';

/** @type {import('@sveltejs/kit').Config} */
const config = {
  extensions: ['.svelte', '.md'],

  kit: {
    adapter: adapter(),

    vite: {
      plugins: [
        Icons({ compiler: 'svelte' }),
        kitDocsPlugin({
          shiki: {
            theme: 'material-ocean',
          },
        }),
      ],
    },
  },
};

export default config;
```

!!!

!!!step title="Add Global Types"|(slot=description)=Add the global TypeScript types to your `app.d.ts` file.

```ts title=src/app.d.ts|copyHighlight{2}
/// <reference types="@sveltejs/kit" />
/// <reference types="@svelteness/kit-docs/globals" />
// ...
```

!!!

!!!step title="Create KitDocs Endpoints"|description="Create the KitDocs endpoints that handle markdown meta and sidebar requests."

```
src
└─ routes
   └─ kit-docs
      ├─ [dir].sidebar.json.js
      ├─ [slug].meta.json.js
```

```js title=routes/kit-docs/[slug].meta.json.js|copy
import { createMetaRequestHandler } from '@svelteness/kit-docs/node';

export const get = createMetaRequestHandler();
```

```js title=routes/kit-docs/[dir].sidebar.json.js|copy
import { createSidebarRequestHandler } from '@svelteness/kit-docs/node';

export const get = createSidebarRequestHandler();
```

!!!

!!!step title="Create Layout File"|(slot=description)=Create your docs layout file. You can place it in another directory if you like, simply remember to update the loader `sidebar` config value.

```
src
└─ routes
   └─ docs
      ├─ __layout.svelte
```

```svelte title=routes/docs/__layout.svelte|copy
<script context="module">
  export const prerender = true;

  export const load = createKitDocsLoader({ sidebar: '/docs' });
</script>

<script>
  import { KitDocs, createKitDocsLoader, createSidebarContext } from '@svelteness/kit-docs';

  /** @type {import('@svelteness/kit-docs').MarkdownMeta} */
  export let meta;

  /** @type {import('@svelteness/kit-docs').ResolvedSidebarConfig} */
  export let sidebar;

  const { activeCategory } = createSidebarContext(sidebar);
</script>

<svelte:head>
  <title>{$activeCategory}: {meta.title} | KitDocs</title>
  <meta name="description" content={meta.description} />
</svelte:head>

<KitDocs {meta}>
  <slot />
</KitDocs>
```

!!!

!!!step title="Create Markdown File"|description="Create your first category and markdown file."

```
src
└─ routes
   └─ docs
      ├─ __layout.svelte
      └─ first-category
         ├─ hello-world.md
```

````svelte title=hello-world.md|copy
---
description: My first markdown file.
---

# Hello World

...

```js title=hello-world|copy
console.log('My code snippet!');
```

<script>
  console.log('Markdown files are Svelte components!');
</script>
````

!!!

:::

You should now be able to start your dev server by running `npm run dev`. Visit `/docs/first-category/hello-world`
to see the Markdown content. Open the developer console and confirm that the string `'Markdown files are Svelte components!'`
has logged.

Congratulations, core setup is done :tada: Follow the [next steps](#default-layout) if
you want a beautiful theme to go with your new docs, otherwise you can [skip it](#endpoints).

## Default Layout

Want something that just "looks good?" The next steps will get the default layout setup for you.

:::steps

!!!step title="Add Color Scheme Script"|(slot=description)=Add the following script inside the `<head>` tag of your `app.html` file.

```html title=src/app.html|copyHighlight{3-12}
<head>
  <!-- ... -->
  <script>
    const key = 'svelteness::color-scheme';
    const scheme = localStorage[key];
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (scheme === 'dark' || (scheme !== 'light' && prefersDark)) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  </script>
</head>
```

!!!

!!!step title="Copy Font Files"|description="Copy the theme font files to your lib folder."

```bash copy
cp -R node_modules/@svelteness/kit-docs/client/fonts src/lib/fonts
```

!!!

!!!step title="Import Assets"|description="Import theme polyfills and styles into your layout file."

```svelte title=routes/docs/__layout.svelte|copyHighlight{2-6}
<script>
  import '@svelteness/kit-docs/client/polyfills/index.js';
  import '@svelteness/kit-docs/client/styles/normalize.css';
  import '@svelteness/kit-docs/client/styles/fonts.css';
  import '@svelteness/kit-docs/client/styles/theme.css';
  import '@svelteness/kit-docs/client/styles/vars.css';
</script>
```

!!!

!!!step title="Add Default Layout"|(slot=description)=Import `KitDocsLayout` and add it to your layout markup.

```svelte title=routes/docs/__layout.svelte{2,6-9,13-15}
<script>
  import { KitDocsLayout } from '@svelteness/kit-docs';

  // ...

  /** @type {import('@svelteness/kit-docs').NavbarConfig} */
  const navbar = {
    links: [{ title: 'Documentation', slug: '/docs', match: /\/docs/ }],
  };
</script>

<KitDocs>
  <KitDocsLayout {navbar} {sidebar}>
    <slot />
  </KitDocsLayout>
</KitDocs>
```

!!!

!!!step title="Set Brand Colors"|description="Set your brand colors using RGB. You can play around in the browser to find what works."

```svelte title=routes/docs/__layout.svelte|copy
<style>
  :global(:root) {
    --kd-color-brand-rgb: 233, 127, 6;
  }

  :global(:root.dark) {
    --kd-color-brand-rgb: 213, 149, 76;
  }
</style>
```

!!!

:::

The [next page](./default-layout) will dive deeper into how you can further customize and work
with the default layout.

## Endpoints

### Meta

The `kit-docs/[slug].meta.json.js` endpoint will match the `slug` parameter to a Markdown file in
`routes/`, parse it and return Markdown metadata such as the title, description, frontmatter,
headings, etc. **This endpoint is required.**

```
src
└─ routes
   └─ kit-docs
      ├─ [slug].meta.json.js <-
```

### Sidebar

The `kit-docs/[dir].sidebar.json.js` endpoint will match the `dir` parameter to a directory in
`routes/`, read all the files inside and return a sidebar config object. You can skip this
endpoint and [create the sidebar manually](./default-layout.md#sidebar).

```
src
└─ routes
   └─ kit-docs
      ├─ [dir].sidebar.json.js <-
```

The loaded sidebar config object looks something like this:

```js
const sidebar = {
  'first-category': [
    { title: 'First Page', slug: '/docs/first-category/first-page' },
    { title: 'Second Page', slug: '/docs/first-category/second-page' },
  ],
  'second-category': [
    // ...
  ],
};
```

## Loaders

We provide a SvelteKit loader for your convenience to simplify loading Markdown related data
into your application.

```svelte{4}
<script context="module">
  import { createKitDocsLoader } from '@svelteness/kit-docs';

  export const load = createKitDocsLoader({ sidebar: '/docs' });
</script>
```

You can load the data yourself if required like so:

```svelte title=Page.svelte|copy
<script context="module">
  import { loadKitDocsMeta, loadKitDocsSidebar } from '@svelteness/kit-docs';

  /** @type {import('@sveltejs/kit').Load} */
  export async function load({ url, fetch }) {
    const meta = await loadKitDocsMeta(url.pathname, fetch);
    const sidebar = await loadKitDocsSidebar('/docs', fetch);
    return {
      props: {
        meta,
        sidebar,
      }
    }
  }
</script>
```

## Stores

You can import the `kitDocs` or `frontmatter` stores for accessing Markdown metadata like so:

```svelte
<script>
  import { kitDocs, frontmatter } from '@svelteness/kit-docs';

  $: console.log($kitDocs.meta);

  // shorthand for $kitDocs.meta.frontmatter
  $: console.log($frontmatter);
</script>
```
